<script>
  var group = JSON.parse('<%- JSON.stringify(group)%>');
  var users = JSON.parse('<%- JSON.stringify(users)%>');
</script>
<div class="wrapper">
  <div>
    <section class="content-header">
      <div class="container-fluid">
        <div class="row mb-2">
          <div class="col-sm-6">
            <ol class="breadcrumb">
              <li class="breadcrumb-item">
                <a href="/scoreScripts">
                  <h5>&lsaquo; Quản lý kịch bản</h5>
                </a>
              </li>
            </ol>
          </div>



        </div>

        <div class="card">

          <div class="card-body">

            <form id="form_new_scoreSripts" onsubmit="return false">

              <div class="row">
                <div class="form-group col-sm-3">
                  <input type="text" class="form-control input" id="name" name="name" placeholder="kịch bản" />
                </div>
                <div class="form-group col-sm-3 d-none">
                  <input type="text" class="form-control input" id="name" name="name" placeholder="kịch bản" />
                </div>
                <div class="form-group col-sm-6 ml-auto text-right">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
                  <button type="submit" id="btn_save_scoreSripts" class="btn btn-primary">Lưu</button>
                </div>

              </div>

              <ul class="nav" id="" role="tablist">
                <li class="nav-item">
                  <a class="nav-link " id="tab-score-script-general-tab" data-toggle="pill"
                    href="#tab-score-script-general" role="tab" aria-controls="tab-score-script-general"
                    aria-selected="true">Chung</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link active" id="tab-score-script-sript-tab" data-toggle="pill"
                    href="#tab-score-script-sript" role="tab" aria-controls="tab-score-script-sript"
                    aria-selected="false">Kịch bản</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" id="tab-score-script-preview-tab" data-toggle="pill"
                    href="#tab-score-script-preview" role="tab" aria-controls="tab-score-script-preview"
                    aria-selected="false">Xem trước</a>
                </li>
              </ul>

              <div class="tab-content" id="tab-score-script-tabContent">

                <!-- tab chung -->
                <div class="tab-pane fade " id="tab-score-script-general" role="tabpanel"
                  aria-labelledby="custom-tabs-three-home-tab">

                  <div class="form-group row">
                    <label for="description" class="col-sm-2 col-form-label">Mô tả <span
                        class="text-danger">*</span></label>
                    <div class="col-sm-10">
                      <input type="email" class="form-control" id="description" name="description" placeholder="Mô tả">
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="description" class="col-sm-2 col-form-label">Điểm tổng hiển thị theo <span
                        class="text-danger">*</span></label>
                    <div class="col-sm-3">
                      <select class="form-control selectpicker input" name="scoreDisplayType" id="scoreDisplayType"
                        title="Chọn...">
                        <% Object.keys(OP_UNIT_DISPLAY).forEach((item)=> { %>
                        <option value="<%= OP_UNIT_DISPLAY[item].n %>">
                          <%= OP_UNIT_DISPLAY[item].t %>
                        </option>
                        <% }); %>

                      </select>
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="description" class="col-sm-2 col-form-label">Xét chỉ tiêu theo <span
                        class="text-danger">*</span></label>
                    <div class="col-sm-3">
                      <select class="form-control selectpicker input" name="scoreDisplayType" id="scoreDisplayType"
                        title="Chọn...">
                        <option value="0">Phần trăm</option>
                        <option value="1">Điểm</option>
                      </select>
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="" class="col-sm-2 col-form-label">Cần cải thiện <span
                        class="text-danger">*</span></label>
                    <div class="col-sm-1 d-flex align-items-center justify-content-center">
                      0
                    </div>
                    <div class="col-sm-1 d-flex align-items-center justify-content-center" style="">
                      <i class="fa fa-minus" aria-hidden="true"></i>
                    </div>
                    <div class="col-sm-1">
                      <input type="number" class="form-control" id="max" name="max" placeholder="">
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="" class="col-sm-2 col-form-label">Đạt tiêu chuẩn <span
                        class="text-danger">*</span></label>
                    <div class="col-sm-1">
                      <input type="number" class="form-control" id="standardMin" name="standardMin" placeholder="">
                    </div>
                    <div class="col-sm-1 d-flex align-items-center justify-content-center" style="">
                      <i class="fa fa-minus" aria-hidden="true"></i>
                    </div>
                    <div class="col-sm-1">
                      <input type="number" class="form-control" id="standardMax" name="standardMax" placeholder="">
                    </div>
                  </div>

                  <div class="form-group row">
                    <label for="" class="col-sm-2 col-form-label">Vượt tiêu chuẩn từ </label>
                    <div class="col-sm-1">
                      <input type="number" class="form-control" id="passStandardMin" name="passStandardMin"
                        placeholder="">
                    </div>
                  </div>

                </div>
                <!-- end tab chung -->

                <!-- tab kịch bản -->
                <div class="tab-pane fade active show" id="tab-score-script-sript" role="tabpanel"
                  aria-labelledby="custom-tabs-three-profile-tab">

                  <!-- template nhom tieu chi -->
                  <div id="tempCriteriaGroup" class="d-none">
                    <%- include('./temp.criteria.group.ejs', { }) %>
                  </div>
                  <!-- end template nhom tieu chi -->

                  <!-- template nút thêm tiêu chí -->
                  <div id="tempBtnAddCriteria" class="d-none">
                    <%- include('./btn.add.ejs', { BTN_TITLE: 'Thêm tiêu chí', BTN_CLASS_NAME : 'add-criteria' }) %>
                  </div>
                  <!-- end template nút thêm tiêu chí -->

                  <!-- template nút thêm lựa chọn -->
                  <div id="tempBtnAddSelectionCriteria" class="d-none">
                    <%- include('./btn.add.ejs', { BTN_TITLE: 'Thêm lựa chọn', BTN_CLASS_NAME : 'add-selection-criteria' }) %>
                  </div>
                  <!-- end template nút thêm lựa chọn -->



                  <!-- Danh sách nhóm tiêu chí -->
                  <div id="scoreScript" class="pt-3">

                  </div>
                  <!-- end Danh sách nhóm tiêu chí -->
                  <%- include('./btn.add.ejs', { BTN_TITLE: 'Thêm nhóm tiêu chí', BTN_CLASS_NAME : 'add-criteria-group' }) %>

                </div>
                <!-- end tab kịch bản -->

                <div class="tab-pane fade" id="tab-score-script-preview" role="tabpanel"
                  aria-labelledby="custom-tabs-three-messages-tab">
                  Morbi turpis dolor, vulputate vitae felis non, tincidunt congue mauris. Phasellus volutpat augue id mi
                  placerat mollis. Vivamus faucibus eu massa eget condimentum. Fusce nec hendrerit sem, ac tristique
                  nulla. Integer vestibulum orci odio. Cras nec augue ipsum. Suspendisse ut velit condimentum, mattis
                  urna a, malesuada nunc. Curabitur eleifend facilisis velit finibus tristique. Nam vulputate, eros non
                  luctus efficitur, ipsum odio volutpat massa, sit amet sollicitudin est libero sed ipsum. Nulla
                  lacinia, ex vitae gravida fermentum, lectus ipsum gravida arcu, id fermentum metus arcu vel metus.
                  Curabitur eget sem eu risus tincidunt eleifend ac ornare magna.
                </div>

              </div>

            </form>


            <div class="row mb-2 d-none">
              <div class="col-sm-8">
                <h1>
                  <%= group.name %>
                </h1>
              </div>
              <div class="col-sm-4 d-flex justify-content-end">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#modal_edit_group">
                  <i class="fa fa-pencil-alt p-0 mr-2" aria-hidden="true"></i>Sửa
                </button>
                <button type="button" class="btn btn-danger ml-2" data-toggle="modal" data-target="#modal_del_group">
                  <i class="fa fa-trash p-0 mr-2" aria-hidden="true"></i>Xóa
                </button>
              </div>
            </div>
            <div class="row mb-2 d-none border-bottom border-dark">
              <div class="col-12">
                <label class="text-primary">Thông tin chung</label>

                <br>
                <span class="text-muted">Mô tả:</span>
                <p id="description">
                  <%= group.description %>
                </p>

                <span class="text-muted">Người tạo:</span>
                <p id="created">
                  <%= group.userCreate.fullName %> (<%= group.userCreate.userName %>)
                </p>

                <span class="text-muted">Ngày tạo:</span>
                <p id="createAt">
                  <%= group.createdAt%>
                </p>

                <span class="text-muted">Ngày cập nhật lần cuối:</span>
                <p id="updateAt">
                  <%= group.updatedAt %>
                </p>
              </div>
            </div>
            <div class="row mb-2 d-none ">
              <div class="col-sm-12">
                <label class="text-primary">Thêm đội ngũ</label>
              </div>
              <div class="col-sm-6 d-flex form-group">
                <div class="col-sm-8 pl-0">
                  <select class="form-control selectpicker input" data-live-search="true" name="members" id="members"
                    title="Chọn..." multiple>
                  </select>
                </div>
                <div class="col-sm-2">
                  <button type="button" class="btn btn-block btn-primary float-sm-left" id="add_user">
                    Thêm
                  </button>
                </div>
              </div>
            </div>
            <div class="row mb-2 d-none">
              <div class="col-sm-12">
                <label class="text-primary">Danh sách đội ngũ</label>
              </div>
              <div class="col-sm-6 d-flex form-group">
                <div class="col-sm-8 pl-0">
                  <div class="input-group">
                    <input type="text" class="form-control" placeholder="Tìm kiếm..." id="search_member" name="name"
                      autocomplete="off">
                  </div>
                </div>
                <div class="col-sm-2">
                  <button type="button" class="form-control btn btn-primary btn-circle" id="btn_search_member">
                    <i class="fas fa-search p-0"></i>
                  </button>
                </div>
              </div>
            </div>
            <div class="row" id="list_user"></div>

          </div>
        </div>
      </div><!-- /.container-fluid -->
    </section>
    <!-- /.content -->
  </div>
</div>

<!-- /.modal -->
<div class="modal fade" id="modal_edit_group">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Sửa kịch bản</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="form_edit_group" onsubmit="return false">
          <div>
            <div class="form-group">
              <label>
                Tên kịch bản
                <span class="text-danger">*</span>
              </label>
              <label class="float-right font-weight-normal text-muted" id="name_length">
                0/50
              </label>
              <input type="text" class="form-control input" id="name" name="name" />
            </div>
          </div>
          <div class="form-group">
            <label>
              Nhóm
              <span class="text-danger">*</span>
            </label>
            <select class="form-control selectpicker input" data-live-search="true" name="leader" id="leader" multiple>
            </select>
          </div>
          <div>
            <div class="form-group">
              <label>
                Mô tả
              </label>
              <label class="float-right font-weight-normal text-muted" id="description_length">
                0/500
              </label>
              <textarea class="form-control input" id="description" name="description" rows="3"></textarea>
            </div>
          </div>
          <div class="modal-footer justify-content-between">
            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
            <button type="submit" id="btn_save_group" class="btn btn-primary">Lưu</button>
          </div>
        </form>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->

<div class="modal fade" id="modal_del_group">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Xóa</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <form id="form_delete_group" onsubmit="return false">
          <div>
            <div class="border-bottom border-dark">
              <h3>Nhóm sẽ bị xóa khỏi hệ thống</h3>
              <p> Xác nhận? </p>
            </div>
          </div>
          <div class="modal-footer">
            <!-- <div class="modal-footer justify-content-between"> -->
            <button type="button" class="btn btn-default" data-dismiss="modal">Hủy</button>
            <button type="submit" class="btn btn-danger">Xác nhận</button>
          </div>
        </form>
      </div>
    </div>
    <!-- /.modal-content -->
  </div>
  <!-- /.modal-dialog -->
</div>
<!-- /.modal -->